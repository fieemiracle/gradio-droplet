# è„šæœ¬ä½¿ç”¨æŒ‡å—

## update_deps.sh - ä¾èµ–æ›´æ–°è„šæœ¬

### åŠŸèƒ½
è‡ªåŠ¨å‡çº§ Python åŒ…å¹¶æ›´æ–°æ‰€æœ‰ç›¸å…³é…ç½®æ–‡ä»¶ã€‚

### ä½¿ç”¨æ–¹æ³•

#### æ­£ç¡®çš„ä½¿ç”¨æ–¹å¼ âœ…

**åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ:**
```bash
# åˆ‡æ¢åˆ°é¡¹ç›®æ ¹ç›®å½•
cd gradio-droplet

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source .venv/bin/activate

# æ‰§è¡Œè„šæœ¬
bash scripts/update_deps.sh gradio
```

**æˆ–è€…ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼ˆæ¨èï¼‰:**
```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•
./scripts/update_deps.sh gradio

# å‡çº§å…¶ä»–åŒ…
./scripts/update_deps.sh pytest
./scripts/update_deps.sh black
```

#### é”™è¯¯çš„ä½¿ç”¨æ–¹å¼ âŒ

```bash
# âŒ ä¸è¦åœ¨ scripts ç›®å½•ä¸‹æ‰§è¡Œ
cd scripts
sh update_deps.sh gradio  # ä¼šåœ¨ scripts/ ç›®å½•ç”Ÿæˆæ–‡ä»¶

# âŒ ä¸è¦ä½¿ç”¨ shï¼ˆåº”è¯¥ç”¨ bashï¼‰
sh scripts/update_deps.sh  # echo -e ä¸å·¥ä½œ
```

### è„šæœ¬åšäº†ä»€ä¹ˆ

1. **è‡ªåŠ¨åˆ‡æ¢åˆ°é¡¹ç›®æ ¹ç›®å½•** - æ— è®ºåœ¨å“ªé‡Œæ‰§è¡Œï¼Œéƒ½ä¼šåˆ‡æ¢åˆ°æ­£ç¡®çš„ç›®å½•
2. **å¤‡ä»½å½“å‰ä¾èµ–** - ç”Ÿæˆ `requirements.backup`
3. **å‡çº§æŒ‡å®šçš„åŒ…** - ä½¿ç”¨ `pip install --upgrade`
4. **æ›´æ–°é…ç½®æ–‡ä»¶** - è‡ªåŠ¨æ›´æ–° `requirements.txt` æˆ– `requirements-dev.txt`
5. **é‡æ–°ç”Ÿæˆé”å®šæ–‡ä»¶** - æ›´æ–° `requirements.lock`
6. **è¿è¡Œæµ‹è¯•** - éªŒè¯æ›´æ–°æ²¡æœ‰ç ´ååŠŸèƒ½
7. **æä¾›å›æ»šé€‰é¡¹** - å¦‚æœæµ‹è¯•å¤±è´¥ï¼Œå¯ä»¥å›æ»š

### ç”Ÿæˆçš„æ–‡ä»¶

| æ–‡ä»¶ | ä½ç½® | è¯´æ˜ | æ˜¯å¦æäº¤ |
|------|------|------|---------|
| `requirements.backup` | é¡¹ç›®æ ¹ç›®å½• | å¤‡ä»½æ–‡ä»¶ | âŒ ä¸æäº¤ |
| `requirements.lock` | é¡¹ç›®æ ¹ç›®å½• | æ›´æ–°çš„é”å®šæ–‡ä»¶ | âœ… æäº¤ |
| `requirements.txt` | é¡¹ç›®æ ¹ç›®å½• | æ›´æ–°çš„ä¾èµ–æ–‡ä»¶ | âœ… æäº¤ |
| `requirements-dev.txt` | é¡¹ç›®æ ¹ç›®å½• | æ›´æ–°çš„å¼€å‘ä¾èµ– | âœ… æäº¤ |

### å®Œæ•´ç¤ºä¾‹

```bash
# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd /gradio-droplet

# 2. æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source .venv/bin/activate

# 3. å‡çº§ gradio
./scripts/update_deps.sh gradio

# è¾“å‡º:
# === ä¾èµ–æ›´æ–°è„šæœ¬ ===
# é¡¹ç›®æ ¹ç›®å½•: /gradio-droplet
#
# æ­¥éª¤ 1/6: å¤‡ä»½å½“å‰ä¾èµ–
# âœ“ å·²å¤‡ä»½åˆ° requirements.backup
#
# æ­¥éª¤ 2/6: å‡çº§ gradio
# âœ“ gradio å·²å‡çº§
#
# æ­¥éª¤ 3/6: æŸ¥çœ‹æ–°ç‰ˆæœ¬
# âœ“ gradio æ–°ç‰ˆæœ¬: 6.5.0
#
# æ­¥éª¤ 4/6: æ›´æ–° requirements æ–‡ä»¶
# âœ“ å·²æ›´æ–° requirements.txt
#
# æ­¥éª¤ 5/6: é‡æ–°ç”Ÿæˆ requirements.lock
# âœ“ å·²æ›´æ–° requirements.lock
#
# æ­¥éª¤ 6/6: è¿è¡Œæµ‹è¯•
# âœ“ æµ‹è¯•é€šè¿‡
#
# === æ›´æ–°å®Œæˆ ===

# 4. æ£€æŸ¥æ›´æ–°
git diff requirements.txt requirements.lock

# 5. æµ‹è¯•åº”ç”¨
python examples/app.py

# 6. æäº¤æ›´æ”¹
git add requirements.txt requirements.lock
git commit -m "chore: update gradio to 6.5.0"
git push

# 7. æ¸…ç†å¤‡ä»½æ–‡ä»¶
rm requirements.backup
```

### å¸¸è§é—®é¢˜

#### Q: ä¸ºä»€ä¹ˆåœ¨ scripts/ ç›®å½•ä¸‹æ‰§è¡Œä¼šå‡ºé”™ï¼Ÿ

**A**: æ—§ç‰ˆæœ¬è„šæœ¬æ²¡æœ‰å¤„ç†å·¥ä½œç›®å½•ï¼Œä¼šåœ¨å½“å‰ç›®å½•æŸ¥æ‰¾æ–‡ä»¶å’Œç”Ÿæˆæ–‡ä»¶ã€‚æ–°ç‰ˆæœ¬å·²ä¿®å¤ï¼Œä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°é¡¹ç›®æ ¹ç›®å½•ã€‚

#### Q: ç”Ÿæˆçš„æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

**A**: æ‰€æœ‰æ–‡ä»¶éƒ½åœ¨**é¡¹ç›®æ ¹ç›®å½•**ï¼Œä¸åœ¨ scripts/ ç›®å½•ï¼š
```
gradio-droplet/
â”œâ”€â”€ requirements.txt        â† è¿™é‡Œ
â”œâ”€â”€ requirements-dev.txt    â† è¿™é‡Œ
â”œâ”€â”€ requirements.lock       â† è¿™é‡Œ
â”œâ”€â”€ requirements.backup     â† è¿™é‡Œï¼ˆä¸´æ—¶æ–‡ä»¶ï¼‰
â””â”€â”€ scripts/
    â””â”€â”€ update_deps.sh
```

#### Q: å¦‚ä½•æ¸…ç†é”™è¯¯ç”Ÿæˆçš„æ–‡ä»¶ï¼Ÿ

**A**: å¦‚æœåœ¨ scripts/ ç›®å½•ä¸‹é”™è¯¯ç”Ÿæˆäº†æ–‡ä»¶ï¼š
```bash
# åˆ é™¤ scripts ç›®å½•ä¸‹çš„é”™è¯¯æ–‡ä»¶
rm -f scripts/requirements.backup
rm -f scripts/requirements.lock
rm -f scripts/.coverage
```

#### Q: æµ‹è¯•å¤±è´¥æ€ä¹ˆåŠï¼Ÿ

**A**: è„šæœ¬ä¼šè¯¢é—®æ˜¯å¦å›æ»šï¼š
```bash
âœ— æµ‹è¯•å¤±è´¥
æ˜¯å¦å›æ»šåˆ°ä¹‹å‰çš„ç‰ˆæœ¬? (y/n)
y  # è¾“å…¥ y å›æ»š
```

æˆ–æ‰‹åŠ¨å›æ»šï¼š
```bash
pip install -r requirements.backup
```

#### Q: ä¸ºä»€ä¹ˆè¦ç”¨ bash è€Œä¸æ˜¯ shï¼Ÿ

**A**: `sh` ä¸æ”¯æŒ `echo -e`ï¼ˆé¢œè‰²è¾“å‡ºï¼‰ï¼Œåº”è¯¥ç”¨ `bash`ï¼š
```bash
âœ… bash scripts/update_deps.sh
âŒ sh scripts/update_deps.sh
```

#### Q: å¦‚ä½•å‡çº§å¤šä¸ªåŒ…ï¼Ÿ

**A**: ä¸€æ¬¡å‡çº§ä¸€ä¸ªåŒ…ï¼š
```bash
./scripts/update_deps.sh gradio
./scripts/update_deps.sh pytest
./scripts/update_deps.sh black
```

#### Q: å¤‡ä»½æ–‡ä»¶éœ€è¦æäº¤å—ï¼Ÿ

**A**: ä¸éœ€è¦ã€‚`requirements.backup` æ˜¯ä¸´æ—¶å¤‡ä»½æ–‡ä»¶ï¼Œå®Œæˆåå¯ä»¥åˆ é™¤ï¼š
```bash
rm requirements.backup
```

### è„šæœ¬æ”¹è¿›

æ–°ç‰ˆæœ¬è„šæœ¬çš„æ”¹è¿›ï¼š

1. âœ… **è‡ªåŠ¨åˆ‡æ¢ç›®å½•** - æ— è®ºåœ¨å“ªé‡Œæ‰§è¡Œï¼Œéƒ½ä¼šåˆ‡æ¢åˆ°é¡¹ç›®æ ¹ç›®å½•
2. âœ… **æ£€æŸ¥æ–‡ä»¶å­˜åœ¨** - ç¡®ä¿ requirements æ–‡ä»¶å­˜åœ¨
3. âœ… **è·¨å¹³å°å…¼å®¹** - æ”¯æŒ macOS å’Œ Linux çš„ sed å‘½ä»¤
4. âœ… **æ›´å¥½çš„æµ‹è¯•å¤„ç†** - æ²¡æœ‰æµ‹è¯•æ—¶ä¸ä¼šæŠ¥é”™
5. âœ… **æ¸…æ™°çš„è¾“å‡º** - æ˜¾ç¤ºé¡¹ç›®æ ¹ç›®å½•å’Œæ›´æ–°çš„æ–‡ä»¶
6. âœ… **æ›´å¥½çš„é”™è¯¯å¤„ç†** - æä¾›è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯

### å…¶ä»–è„šæœ¬

#### setup_commit_hooks.sh - Commit è§„èŒƒè®¾ç½®

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ
./scripts/setup_commit_hooks.sh
```

åŠŸèƒ½ï¼š
- å®‰è£… pre-commit hooks
- é…ç½® commitizen
- è®¾ç½® git commit æ¨¡æ¿

## run_dev_server.sh - å¼€å‘æœåŠ¡å™¨å¯åŠ¨è„šæœ¬

### åŠŸèƒ½
å¯åŠ¨ Gradio å¤šåº”ç”¨å¼€å‘æœåŠ¡å™¨ï¼Œæ”¯æŒè·¯ç”±å’Œçƒ­æ›´æ–°ã€‚

### ä½¿ç”¨æ–¹æ³•

#### åœ¨ä»»ä½•ç›®å½•ä¸‹æ‰§è¡Œ âœ…

```bash
# æ–¹å¼ 1: åœ¨é¡¹ç›®æ ¹ç›®å½•
./scripts/run_dev_server.sh
```

**å…³é”®ç‰¹æ€§**:
- âœ… å¯ä»¥åœ¨ä»»ä½•ç›®å½•ä¸‹æ‰§è¡Œ
- âœ… è‡ªåŠ¨åˆ‡æ¢åˆ°é¡¹ç›®æ ¹ç›®å½•
- âœ… è‡ªåŠ¨æ£€æµ‹å¹¶æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼ˆ.venv æˆ– venvï¼‰
- âœ… æ£€æŸ¥å¿…è¦çš„ä¾èµ–ï¼ˆgradio, fastapiï¼‰
- âœ… æä¾›æ¸…æ™°çš„é”™è¯¯æç¤º

### è„šæœ¬åšäº†ä»€ä¹ˆ

1. **è‡ªåŠ¨å®šä½é¡¹ç›®æ ¹ç›®å½•** - æ— è®ºåœ¨å“ªé‡Œæ‰§è¡Œï¼Œéƒ½ä¼šæ‰¾åˆ°æ­£ç¡®çš„é¡¹ç›®ç›®å½•
2. **æ£€æµ‹è™šæ‹Ÿç¯å¢ƒ** - è‡ªåŠ¨æŸ¥æ‰¾ `.venv` æˆ– `venv` å¹¶æ¿€æ´»
3. **æ£€æŸ¥ä¾èµ–** - éªŒè¯ gradio å’Œ fastapi æ˜¯å¦å·²å®‰è£…
4. **å¯åŠ¨æœåŠ¡å™¨** - è¿è¡Œ `examples/dev_server.py`

### è¾“å‡ºç¤ºä¾‹

```bash
==========================================
ğŸš€ å¯åŠ¨ Gradio å¼€å‘æœåŠ¡å™¨
==========================================
é¡¹ç›®ç›®å½•: /gradio-droplet

âœ“ æ£€æµ‹åˆ°è™šæ‹Ÿç¯å¢ƒ: .venv
âœ“ è™šæ‹Ÿç¯å¢ƒå·²æ¿€æ´»

æ£€æŸ¥ä¾èµ–...
âœ“ ä¾èµ–æ£€æŸ¥é€šè¿‡

å¯åŠ¨æœåŠ¡å™¨...
==========================================

============================================================
ğŸš€ Gradio å¼€å‘æœåŠ¡å™¨
============================================================

ğŸ“ å‘ç° 3 ä¸ªåº”ç”¨:
   âœ“ /app             -> app.py
   âœ“ /demo            -> demo.py
   âœ“ /hello           -> hello.py

ğŸ“ è®¿é—®åœ°å€:
   é¦–é¡µ: http://localhost:7860/
   app: http://localhost:7860/app
   demo: http://localhost:7860/demo
   hello: http://localhost:7860/hello

ğŸ’¡ æç¤º:
   - ä¿®æ”¹æ–‡ä»¶ååˆ·æ–°é¡µé¢å³å¯çœ‹åˆ°æ›´æ–°
   - æ–°å¢æ–‡ä»¶éœ€è¦é‡å¯æœåŠ¡å™¨
   - æŒ‰ Ctrl+C åœæ­¢æœåŠ¡å™¨
============================================================
```

### å¸¸è§é—®é¢˜

#### Q: åœ¨ä»»ä½•ç›®å½•ä¸‹éƒ½èƒ½è¿è¡Œå—ï¼Ÿ

**A**: æ˜¯çš„ï¼è„šæœ¬ä¼šè‡ªåŠ¨å®šä½é¡¹ç›®æ ¹ç›®å½•ï¼š
```bash
# åœ¨æ¡Œé¢æ‰§è¡Œ
cd ~/Desktop
bash Projects/gradio-droplet/scripts/run_dev_server.sh  # âœ… å¯ä»¥

# åœ¨ /tmp ç›®å½•æ‰§è¡Œ
cd /tmp
bash ~/Desktop/Projects/gradio-droplet/scripts/run_dev_server.sh  # âœ… å¯ä»¥
```

#### Q: å¦‚æœæ²¡æœ‰è™šæ‹Ÿç¯å¢ƒä¼šæ€æ ·ï¼Ÿ

**A**: è„šæœ¬ä¼šæ˜¾ç¤ºè­¦å‘Šä½†ç»§ç»­è¿è¡Œï¼š
```bash
âš  è­¦å‘Š: æœªæ£€æµ‹åˆ°è™šæ‹Ÿç¯å¢ƒ
   å»ºè®®å…ˆåˆ›å»ºè™šæ‹Ÿç¯å¢ƒ: python3 -m venv .venv
```

#### Q: å¦‚æœç¼ºå°‘ä¾èµ–ä¼šæ€æ ·ï¼Ÿ

**A**: è„šæœ¬ä¼šæ£€æŸ¥å¹¶æç¤ºå®‰è£…ï¼š
```bash
âŒ é”™è¯¯: gradio æœªå®‰è£…
   è¯·è¿è¡Œ: pip install -r requirements.txt
```

æˆ–è€…ï¼š
```bash
âŒ é”™è¯¯: fastapi æœªå®‰è£…
   è¯·è¿è¡Œ: pip install fastapi uvicorn
```

#### Q: å¦‚ä½•åœæ­¢æœåŠ¡å™¨ï¼Ÿ

**A**: æŒ‰ `Ctrl+C` åœæ­¢æœåŠ¡å™¨ã€‚

#### Q: å¯ä»¥æ·»åŠ åˆ° PATH å—ï¼Ÿ

**A**: å¯ä»¥ï¼åˆ›å»ºè½¯é“¾æ¥æˆ–åˆ«åï¼š

**æ–¹å¼ 1: è½¯é“¾æ¥**
```bash
# åˆ›å»ºè½¯é“¾æ¥åˆ° /usr/local/bin
sudo ln -s /gradio-droplet/scripts/run_dev_server.sh /usr/local/bin/gradio-dev

# ç„¶ååœ¨ä»»ä½•åœ°æ–¹è¿è¡Œ
gradio-dev
```

**æ–¹å¼ 2: åˆ«å**
```bash
# æ·»åŠ åˆ° ~/.bashrc æˆ– ~/.zshrc
alias gradio-dev='xxxxx/gradio-droplet/scripts/run_dev_server.sh'

# é‡æ–°åŠ è½½é…ç½®
source ~/.bashrc  # æˆ– source ~/.zshrc

# ç„¶ååœ¨ä»»ä½•åœ°æ–¹è¿è¡Œ
gradio-dev
```

### ä¸ç›´æ¥è¿è¡Œçš„åŒºåˆ«

| æ–¹å¼ | å‘½ä»¤ | ä¼˜ç‚¹ | ç¼ºç‚¹ |
|------|------|------|------|
| ç›´æ¥è¿è¡Œ | `python examples/dev_server.py` | ç®€å• | å¿…é¡»åœ¨é¡¹ç›®æ ¹ç›®å½•ï¼Œéœ€è¦æ‰‹åŠ¨æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ |
| ä½¿ç”¨è„šæœ¬ | `./scripts/run_dev_server.sh` | è‡ªåŠ¨å¤„ç†ç›®å½•å’Œè™šæ‹Ÿç¯å¢ƒï¼Œå¯åœ¨ä»»ä½•ä½ç½®è¿è¡Œ | éœ€è¦ bash |

### å®Œæ•´å·¥ä½œæµç¨‹

```bash
# 1. ä»ä»»ä½•ç›®å½•å¯åŠ¨æœåŠ¡å™¨
cd ~/Documents  # åœ¨å…¶ä»–ç›®å½•
bash xxx/gradio-droplet/scripts/run_dev_server.sh

# 2. æµè§ˆå™¨è®¿é—®
# http://localhost:7860/

# 3. ä¿®æ”¹ä»£ç 
# ç¼–è¾‘ examples/hello.py

# 4. åˆ·æ–°æµè§ˆå™¨
# ç«‹å³çœ‹åˆ°æ›´æ–°ï¼ˆçƒ­æ›´æ–°ï¼‰

# 5. åœæ­¢æœåŠ¡å™¨
# æŒ‰ Ctrl+C
```

## æ€»ç»“

| æ“ä½œ | å‘½ä»¤ |
|------|------|
| å¯åŠ¨å¼€å‘æœåŠ¡å™¨ | `./scripts/run_dev_server.sh` |
| å‡çº§ä¾èµ– | `./scripts/update_deps.sh <package>` |
| è®¾ç½® commit hooks | `./scripts/setup_commit_hooks.sh` |
| æ¸…ç†å¤‡ä»½æ–‡ä»¶ | `rm requirements.backup` |
| å›æ»šæ›´æ–° | `pip install -r requirements.backup` |

**è®°ä½**:
- âœ… åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œè„šæœ¬
- âœ… ä½¿ç”¨ `bash` è€Œä¸æ˜¯ `sh`
- âœ… æ¿€æ´»è™šæ‹Ÿç¯å¢ƒåå†æ‰§è¡Œï¼ˆupdate_deps.sh å’Œ setup_commit_hooks.shï¼‰
- âœ… run_dev_server.sh å¯ä»¥åœ¨ä»»ä½•ç›®å½•æ‰§è¡Œ
- âœ… å®Œæˆååˆ é™¤ `requirements.backup`
